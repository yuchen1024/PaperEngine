%!TEX program = xelatex
\documentclass[a4paper,11pt]{book}

\ifChinese
% 使用UTF8编码, punct--对中文标点显示进行优化
\usepackage[UTF8, punct]{ctex}
% 使用xeCJK处理中文
\usepackage{xeCJK}
\setCJKmainfont{STSongti-SC-Regular}
\fi

% 定义页面尺寸
% \usepackage[a4paper, left = 3.2cm, right = 3.2cm, top = 2.54cm, bottom = 2.54cm]{geometry}
\usepackage{fullpage}

\usepackage{caption}
\usepackage{latexsym}
\usepackage{amsmath, amsthm, amsfonts}
\usepackage{mathrsfs}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{xcolor}
\usepackage{colortbl}
\usepackage{soul}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{framed}
\usepackage{boxedminipage}
\usepackage{cancel,siunitx}
\usepackage{amssymb}% http://ctan.org/pkg/amssymb
\usepackage{pifont}% http://ctan.org/pkg/pifont
\usepackage{makecell}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{threeparttable}
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
\usepackage{url}
\usepackage{float}
\usepackage[numbers,sectionbib]{natbib}
\usepackage{mdframed}
\usepackage[normalem]{ulem} % 批注
\usepackage{autobreak}

\usepackage{adjustbox}
\usepackage{dashbox}

\makeatletter
    \renewcommand\@biblabel[1]{{[#1]\hfill}}
\makeatother
\setlength{\bibsep}{0.5ex}
\usepackage[colorlinks, anchorcolor=blue, linkcolor=blue, citecolor=blue, urlcolor=blue]{hyperref}
\usepackage[title,titletoc,header]{appendix}
% \usepackage{authblk}
% \renewcommand*{\Affilfont}{\small}



\usepackage{tikz, pgfplots}
\usetikzlibrary{matrix, fit, calc, matrix, patterns, backgrounds, arrows, 
shapes, chains, fit, decorations, intersections, positioning}

\tikzset{
    shapenode/.style = {draw, rectangle, fill=none, minimum size=0.5cm, minimum height=0.6cm, minimum width=0.6cm, 
    auto, node distance=0em, font=\normalsize}, 
    roundnode/.style = {draw, rectangle, rounded corners=0.5em, inner sep = 0em, 
      node distance=0em, minimum height=1.5em},
    rectanglenode/.style = {draw, rectangle, inner sep = 0em, node distance=0em},
    ellipsenode/.style = {draw, ellipse, inner sep = 0em, node distance=0em},
    textnode/.style  = {draw=none, fill=none, rectangle, node distance=0em, font=\normalsize},
    smalltextnode/.style  = {draw=none, fill=none, rectangle, minimum size=0.5cm, auto, node distance=0em, font=\small},
    circlenode/.style = {draw, circle, auto, inner sep = 0em, node distance=0em, minimum size=1.5em}, 
    dotnode/.style = {draw, fill=black, circle, auto, minimum size=0.1em, inner sep = 0em, node distance=0em},  
    connect/.style = {black,->}, 
    every text node part/.style={align=center}
}

% define the colors
\definecolor{lightmidnightblue}{rgb}{0.2, 0.2, 0.7}
\definecolor{darkgreen}{rgb}{0.0,0.5,0.0}

\newcommand{\blue}[1]{{\color{blue} #1}}
\newcommand{\cyan}[1]{{\color{cyan} #1}}
\newcommand{\purple}[1]{{\color{purple} #1}}
\newcommand{\yellow}[1]{{\color{yellow} #1}}
\newcommand{\darkred}[1]{{\color{darkred} #1}}
\newcommand{\gray}[1]{{\color{gray} #1}}
\newcommand{\red}[1]{{\color{red} #1}}
\newcommand{\green}[1]{{\color{green}#1}}
\newcommand{\magenta}[1]{{\color{magenta} #1}}
\newcommand{\black}[1]{{\color{black} #1}}
\newcommand{\orange}[1]{{\color{orange} #1}}
\newcommand{\mdblue}[1]{{\color{lightmidnightblue} #1}}

\colorlet{lightgray}{gray!20}
\colorlet{darkgray}{gray!100}

% define notions
\renewcommand{\P}{\mathbf{P}}
\newcommand{\NP}{\mathbf{NP}}
\newcommand{\coNP}{\textup{co-}\mathbf{NP}}

% define shorthands
\newcommand{\define}{\stackrel{\textup{def}}{=}}

\newcommand{\iO}{i\mathcal{O}}
\newcommand{\diO}{di\mathcal{O}}
\newcommand{\sample}{\xleftarrow{\textup{\tiny R}}}
\newcommand{\expect}{\mathbb{E}}
\newcommand{\entropy}{\mathsf{H}}
\newcommand{\minentropy}{\mathsf{H}_\infty}
\newcommand{\avminentropy}{\tilde{\mathsf{H}}_\infty}
\newcommand{\AdvA}{\mathsf{Adv}_\mathcal{A}}
\newcommand{\AdvB}{\mathsf{Adv}_\mathcal{B}}

\newcommand{\outV}{\text{out}_V}
\newcommand{\viewV}{\text{view}_V}
\newcommand{\viewVstar}{\text{view}_{V^*}}

\newcommand{\Oderive}{\mathcal{O}_\mathsf{derive}^\Phi}
\newcommand{\Oinv}{\mathcal{O}_\mathsf{inv}}
\newcommand{\Oleak}{\mathcal{O}_\mathsf{leak}(\cdot)}
\newcommand{\Ovefy}{\mathcal{O}_\mathsf{vefy}(\cdot,\cdot)}
\newcommand{\Otag}{\mathcal{O}_\mathsf{tag}(\cdot)}
\newcommand{\Osign}{\mathcal{O}_\mathsf{sign}}
\newcommand{\Odecrypt}{\mathcal{O}_\mathsf{decrypt}}
\newcommand{\Odecaps}{\mathcal{O}_\mathsf{decaps}}
\newcommand{\OregH}{\mathcal{O}_\mathsf{regH}}
\newcommand{\OregC}{\mathcal{O}_\mathsf{regC}}
\newcommand{\Oreveal}{\mathcal{O}_\mathsf{reveal}}
\newcommand{\Oibedecaps}{\mathcal{O}_\mathsf{decaps}(\cdot, \cdot)}
\newcommand{\Osim}{\mathcal{O}_\mathsf{sim}}
\newcommand{\Oenc}{\mathcal{O}_\mathsf{enc}}
\newcommand{\Oext}{\mathcal{O}_\mathsf{ext}}
\newcommand{\Oconstrain}{\mathcal{O}_\mathsf{constrain}}
\newcommand{\Oevalempty}{\mathcal{O}_\mathsf{eval}(\$)}

\newcommand{\Oracle}{\mathcal{O}}
\newcommand{\TBA}{\blue{To be add more ...}}

\newcommand{\poly}{\textup{poly}}
\newcommand{\polylog}{\textup{polylog}}
\newcommand{\loglog}{\textup{loglog}}
% \newcommand{\MA}{\mathbf{MA}}
% \newcommand{\PSAPCE}{\mathbf{PSPACE}}
% \newcommand{\NEXT}{\mathbf{NEXT}}

\ifChinese

\newtheorem{theorem}{\indent 定理}[section]
\newtheorem{lemma}[theorem]{\indent 引理}
\newtheorem{claim}[theorem]{\indent 断言}
\newtheorem{proposition}[theorem]{\indent 命题}
\newtheorem{corollary}[theorem]{\indent 推论}
\newtheorem{definition}{\indent 定义}[section]
\newtheorem{example}{\indent 例}[section]
\newtheorem{remark}{\indent 注}[section]
\newenvironment{solution}{\begin{proof}[\indent\bf 解]}{\end{proof}}
\renewcommand{\proofname}{\indent\bf 证明}

\else
% define theorem enviroments
\theoremstyle{plain}% default
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{example}{Example}[section]
\newtheorem{note}{Note}[section]
\newtheorem{assumption}{Assumption}[section]
\newtheorem{construction}{Construction}[section]
\newtheorem{exercise}{Exercise}[section]
\newtheorem{discussion}{Discussion}[section]

\theoremstyle{remark}
\newtheorem{remark}{Remark}[section]
\newtheorem{case}{Case}[section]
\newtheorem{observation}{Observation}[section]
\fi

% define references
\renewcommand\bibname{References}
\renewcommand{\bibfont}{\small}

\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

\newcommand{\redul}{\bgroup\markoverwith{\textcolor{red}{\rule[-0.5ex]{2pt}{0.4pt}}}\ULon} % 红色下划线
\newcommand{\blueul}{\bgroup\markoverwith{\textcolor{blue}{\rule[-0.5ex]{2pt}{0.4pt}}}\ULon} % 蓝色下划线
\newcommand{\blackul}{\bgroup\markoverwith{\textcolor{black}{\rule[-0.5ex]{2pt}{0.4pt}}}\ULon} % 黑色下划线

% define new commands
\newcommand{\myindent}{\hspace{1em}}
\newcommand{\keywords}[1]{\par\addvspace\baselineskip\noindent\keywordname\enspace\ignorespaces#1}

\newcommand{\hatf}{\hat{f}}

\newenvironment{mytrivlist}{\begin{trivlist}\itemsep 1pt \parskip 0pt \parsep 0pt}{\end{trivlist}}
\newenvironment{myitemize}{\begin{itemize}\itemsep 1pt \parskip 0pt \parsep 0pt}{\end{itemize}}
\newenvironment{myenumerate}{\begin{enumerate}\itemsep 1pt \parskip 0pt \parsep 0pt}{\end{enumerate}}

\newenvironment{noteblock}[0]{%
\setbeamercolor{block body}{bg=gray!20,fg=black}
\begin{block}{}}
{\end{block}}

\ifChinese
\renewcommand\bibname{参考文献}
\fi

\renewcommand{\bibfont}{\small}
